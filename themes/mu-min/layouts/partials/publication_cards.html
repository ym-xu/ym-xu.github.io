{{ $limit := or .limit 6 }}
{{ $pubs := slice }}
{{ with site.GetPage "section" "publications" }}
  {{ $pubs = .Pages.ByDate.Reverse }}
{{ end }}
{{ if gt (len $pubs) 0 }}
<div class="cards cards-hz">
  {{ range first (int $limit) $pubs }}
    {{ $cover := .Resources.GetMatch "cover*" }}
    <article class="card pub-card hz">
      <a class="card-media" href="{{ .RelPermalink }}" aria-label="Open {{ .Title }}">
        {{ if $cover }}
          <img src="{{ $cover.RelPermalink }}" alt="cover for {{ .Title }}" loading="lazy" decoding="async" />
        {{ else }}
          <div class="card-placeholder" aria-hidden="true"></div>
        {{ end }}
      </a>
      <div class="card-body">
        <h3 class="card-title"><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
        <div class="card-meta">
          {{ with .Params.authors }}<span class="authors">{{ . }}</span>{{ end }}
          {{ with .Params.venue }} Â· <span class="venue">{{ . }}</span>{{ end }}
          {{ with .Params.year }} <span class="year">({{ . }})</span>{{ end }}
        </div>
        {{ with .Params.summary }}<p class="card-summary">{{ . }}</p>{{ end }}
        <div class="card-links">
          {{ with .Params.links.pdf }}<a class="pill" href="{{ . }}" target="_blank" rel="noopener">PDF</a>{{ end }}
          {{ with .Params.links.code }}<a class="pill" href="{{ . }}" target="_blank" rel="noopener">Code</a>{{ end }}
          {{ with .Params.links.doi }}<a class="pill" href="https://doi.org/{{ . }}" target="_blank" rel="noopener">DOI</a>{{ end }}
          {{ with .Params.links.project }}<a class="pill" href="{{ . }}" target="_blank" rel="noopener">Project</a>{{ end }}
        </div>
      </div>
    </article>
  {{ end }}
</div>
{{ else }}
<p class="muted">No publications yet.</p>
{{ end }}
